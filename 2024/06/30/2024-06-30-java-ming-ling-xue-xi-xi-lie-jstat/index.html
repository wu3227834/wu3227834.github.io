<!DOCTYPE html>
<html lang=zh-CN>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="这里是小布丁的私有小屋">
    <meta property="og:type" content="website">
    <meta name="description" content="这里是小布丁的私有小屋">
    <meta name="keyword" content="Pudding,Pudding的博客">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
            Java命令学习系列—Jstat - Pudding 个人博客
                
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

        
<link rel="stylesheet" href="/css/gitment.css">

            <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
            <link rel="stylesheet" href="/css/prism.css">
            <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
            <!-- ga & ba script hoook -->
            <script>
            </script>

            









<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Pudding 日常" type="application/atom+xml">
</head>
<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> a week is 2% of the year </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.png" />
        </div>
        <div class="name">
            <i>Pudding</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#jstat-%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F"><span class="toc-text">jstat 命令格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A%EF%BC%9A"><span class="toc-text">参数解释：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#option"><span class="toc-text">option</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%9C%AF%E8%AF%AD"><span class="toc-text">常见术语</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> a week is 2% of the year </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Java命令学习系列—Jstat
    </div>

    <div class="post-meta">
        <!-- <span class="attr">发布于：<span>2024-06-30 00:00:00</span></span> -->
        <span class="attr">发布于：<span>2024-06-30</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#性能测试" title="性能测试">性能测试</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#Java" title="Java">Java</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <blockquote>
<p>jstat (JVM Statistics Monitoring Tool) 用于监控虚拟机各种运行状态信息的命令行工具。它可以显示本地或远程虚拟机进程中类加载、内存、垃圾收集、JIT 编译等运行数据，再没有 GUI 图形的服务器上，它是运行期间定位虚拟机性能问题首选工具。</p>
</blockquote>
<p>jstat 位于 java 的 bin 目录下，主要利用 JVM 内建的指令对 Java 应用程序的资源和性能进行实施的命令行的监控，包括了对 Heap size 和垃圾回收状况的监控。可见，Jstat 是轻量级的、专门针对 JVM 的工具，非常适用。</p>
<h2 id="jstat-命令格式"><a href="#jstat-命令格式" class="headerlink" title="jstat 命令格式"></a>jstat 命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -&lt;option&gt; [-t] [-h&lt;lines&gt;] &lt;vmid&gt; [&lt;interval&gt; [&lt;count&gt;]]</span><br></pre></td></tr></table></figure>

<h3 id="参数解释："><a href="#参数解释：" class="headerlink" title="参数解释："></a><strong>参数解释：</strong></h3><ul>
<li>Option — 选项，我们一般使用 -gcutil 查看 gc 情况</li>
<li>vmid — VM的进程号，即当前运行的java进程号</li>
<li>interval– 间隔时间，单位为秒或者毫秒</li>
<li>count — 打印次数，如果缺省则打印无数次</li>
<li>参数 interval 和 count 代表查询间隔和次数，如果省略这两个参数，说明只查询一次。假设需要每 250 毫秒查询一次进程 5828 垃圾收集状况，一共查询 5 次，那命令行如下：  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gc 5828 250 5</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">对于命令格式中的 VMID 与 LVMID 需要特别说明下：</span><br><span class="line">如果是本地虚拟机进程，VMID(Virtual Machine IDentifier,虚机标识符) 和 LVMID(Local Virtual Machine IDentifier，虚机标识符) 是一致的；</span><br><span class="line">如果是远程虚拟机进程，那 VMID 的格式应当是：[protocol:][//] lvmid [@hostname[:port]/servername]</span><br></pre></td></tr></table></figure>

<h3 id="option"><a href="#option" class="headerlink" title="option"></a><strong>option</strong></h3><p>选项 option 代表这用户希望查询的虚拟机信息，主要分为 3 类：类装载、垃圾收集和运行期编译状况，具体选项及作用如下：</p>
<ul>
<li><code>class</code> 监视类装载、卸载数量、总空间及类装载所耗费的时间</li>
<li><code>gc</code> 监视 Java 堆状况，包括 Eden 区、2 个Survivor区、老年代、永久代等的容量</li>
<li><code>gccapacity</code> 监视内容与 -gc 基本相同，但输出主要关注 Java 堆各个区域使用到的最大和最小空间</li>
<li><code>gcutil</code> 监视内容与 -gc 基本相同，但输出主要关注已使用空间占总空间的百分比</li>
<li><code>gccause</code> 与 -gcutil 功能一样，但是会额外输出导致上一次 GC 产生的原因</li>
<li><code>gcnew</code> 监视新生代 GC 的状况</li>
<li><code>gcnewcapacity</code>监视内容与 -gcnew 基本相同，输出主要关注使用到的最大和最小空间</li>
<li><code>gcold</code> 监视老年代 GC 的状况</li>
<li><code>gcoldcapacity</code> 监视内容与 -gcold 基本相同，输出主要关注使用到的最大和最小空间</li>
<li><code>gcpermcapacity</code> 输出永久代使用到的最大和最小空间</li>
<li><code>compiler</code> 输出 JIT 编译器编译过的方法、耗时等信息</li>
<li><code>printcompilation</code> 输出已经被 JIT 编译的方法</li>
</ul>
<h2 id="常见术语"><a href="#常见术语" class="headerlink" title="常见术语"></a><strong>常见术语</strong></h2><p><strong>1、<code>jstat –class&lt;pid&gt; :</code> 显示加载 class 的数量，及所占空间等信息。</strong></p>
<blockquote>
<p><code>Loaded</code> 装载的类的数量<br><code>Bytes</code> 装载类所占用的字节数 <br><code>Unloaded</code> 卸载类的数量 <br><code>Bytes</code> 卸载类的字节数 <br><code>Time</code> 装载和卸载类所花费的时间</p>
</blockquote>
<p><strong>2、<code>jstat -compiler &lt;pid&gt;</code>显示 VM 实时编译的数量等信息。</strong></p>
<blockquote>
<p><code>Compiled</code> 编译任务执行数量 <br><code>Failed</code> 编译任务执行失败数量 <br><code>Invalid</code> 编译任务执行失效数量 <br><code>Time</code> 编译任务消耗时间 <br><code>FailedType</code> 最后一个编译失败任务的类型 <br><code>FailedMethod</code> 最后一个编译失败任务所在的类及方法</p>
</blockquote>
<p><strong>3、<code>jstat -gc &lt;pid&gt;</code>: 可以显示 gc 的信息，查看 gc 的次数，及时间。</strong></p>
<blockquote>
<p><code>S0C</code> 年轻代中第一个 survivor（幸存区）的容量 （字节）<br><code>S1C</code> 年轻代中第二个 survivor（幸存区）的容量 （字节）<br><code>S0U</code> 年轻代中第一个 survivor（幸存区）目前已使用空间（字节）<br><code>S1U</code> 年轻代中第二个 survivor（幸存区）目前已使用空间（字节）<br><code>EC</code> 年轻代中 Eden（伊甸园）的容量（字节）<br><code>EU</code> 年轻代中 Eden（伊甸园）目前已使用空间（字节）<br><code>OC</code> Old 代的容量（字节）<br><code>OU</code> Old 代目前已使用空间（字节）<br><code>PC</code> Perm（持久代）的容量（字节） <br><code>PU</code> Perm（持久代）目前已使用空间（字节）<br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数<br><code>YGCT</code> 从应用程序启动到采样时年轻代中 gc 所用时间（s）<br><code>FGC</code> 从应用程序启动到采样时 old 代（全 gc）gc 次数<br><code>FGCT</code> 从应用程序启动到采样时 old 代（全 gc）gc 所用时间（s）<br><code>GCT</code> 从应用程序启动到采样时 gc 用的总时间（s）</p>
</blockquote>
<p><strong>4、<code>jstat -gccapacity &lt;pid&gt;:</code>可以显示，VM内存中三代（young,old,perm）对象的使用和占用大小</strong></p>
<blockquote>
<p><code>NGCMN</code> 年轻代（young）中初始化（最小）的大小（字节） <br><code>NGCMX</code> 年轻代（young）的最大容量（字节）<br><code>NGC</code> 年轻代（young）中当前的容量（字节）<br><code>S0C</code> 年轻代中第一个 survivor（幸存区）的容量（字节） <br><code>S1C</code> 年轻代中第二个 survivor（幸存区）的容量（字节） <br><code>EC</code> 年轻代中 Eden（伊甸园）的容量（字节） <br><code>OGCMN</code> old 代中初始化（最小）的大小（字节）<br><code>OGCMX</code> old 代的最大容量（字节）<br><code>OGC</code> old代当前新生成的容量（字节）<br><code>OC</code> Old代的容量 （字节） <br><code>PGCMN</code> perm 代中初始化（最小）的大小 （字节） <br><code>PGCMX</code> perm 代的最大容量（字节）<br><code>PGC</code> perm 代当前新生成的容量（字节） <br><code>PC</code> Perm（持久代）的容量（字节） <br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数 <br><code>FGC</code> 从应用程序启动到采样时 old 代（全gc）gc 次数</p>
</blockquote>
<p><strong>5、<code>jstat -gcutil &lt;pid&gt;</code>:统计gc信息</strong></p>
<blockquote>
<p><code>S0</code> 年轻代中第一个 survivor（幸存区）已使用的占当前容量百分比<br><code>S1</code> 年轻代中第二个 survivor（幸存区）已使用的占当前容量百分比<br><code>E</code> 年轻代中 Eden（伊甸园）已使用的占当前容量百分比<br><code>O</code> old 代已使用的占当前容量百分比 <br><code>P</code> perm 代已使用的占当前容量百分比 <br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数 <br><code>YGCT</code> 从应用程序启动到采样时年轻代中 gc 所用时间（s）<br><code>FGC</code> 从应用程序启动到采样时 old 代（全 gc）gc 次数 <br><code>FGCT</code> 从应用程序启动到采样时 old 代（全 gc）gc 所用时间（s） <br><code>GCT</code> 从应用程序启动到采样时 gc 用的总时间（s）</p>
</blockquote>
<p><strong>6、<code>jstat -gcnew &lt;pid&gt;</code>:年轻代对象的信息。</strong></p>
<blockquote>
<p><code>S0C</code> 年轻代中第一个survivor（幸存区）的容量（字节）<br><code>S1C</code> 年轻代中第二个survivor（幸存区）的容量（字节）<br><code>S0U</code> 年轻代中第一个survivor（幸存区）目前已使用空间（字节）<br><code>S1U</code> 年轻代中第二个survivor（幸存区）目前已使用空间（字节）<br><code>TT</code> 持有次数限制<br><code>MTT</code> 最大持有次数限制<br><code>EC</code> 年轻代中 Eden（伊甸园）的容量（字节）<br><code>EU</code> 年轻代中 Eden（伊甸园）目前已使用空间（字节）<br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数<br><code>YGCT</code> 从应用程序启动到采样时年轻代中 gc 所用时间（s）</p>
</blockquote>
<p><strong>7、<code>jstat -gcnewcapacity&lt;pid&gt;</code>: 年轻代对象的信息及其占用量。</strong></p>
<blockquote>
<p><code>NGCMN</code> 年轻代（young）中初始化（最小）的大小（字节）<br><code>NGCMX</code> 年轻代（young）的最大容量（字节）<br><code>NGC</code> 年轻代（young）中当前的容量（字节）<br><code>S0CMX</code> 年轻代中第一个 survivor（幸存区）的最大容量（字节）<br><code>S0C</code> 年轻代中第一个 survivor（幸存区）的容量（字节）<br><code>S1CMX</code> 年轻代中第二个 survivor（幸存区）的最大容量（字节）<br><code>S1C</code> 年轻代中第二个 survivor（幸存区）的容量（字节）<br><code>ECMX</code> 年轻代中 Eden（伊甸园）的最大容量（字节）<br><code>EC</code> 年轻代中 Eden（伊甸园）的容量（字节）<br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数<br><code>FGC</code> 从应用程序启动到采样时 old 代（全 gc）gc 次数</p>
</blockquote>
<p><strong>8、<code>jstat -gcold &lt;pid&gt;：</code>old代对象的信息。</strong></p>
<blockquote>
<p><code>PC</code> Perm（持久代）的容量 （字节） <br><code>PU</code> Perm（持久代）目前已使用空间 （字节） <br><code>OC</code> Old代的容量 （字节） OU Old 代目前已使用空间 （字节） <br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数 <br><code>FGC</code> 从应用程序启动到采样时 old 代（全gc）gc 次数 <br><code>FGCT</code> 从应用程序启动到采样时 old 代（全gc）gc 所用时间（s） <br><code>GCT</code> 从应用程序启动到采样时 gc 用的总时间（s）</p>
</blockquote>
<p><strong>9、<code>stat -gcoldcapacity &lt;pid&gt;</code>: old代对象的信息及其占用量。</strong></p>
<blockquote>
<p><code>OGCMN</code> old 代中初始化（最小）的大小 （字节）<br><code>OGCMX</code> old 代的最大容量（字节）<br><code>OGC</code> old 代当前新生成的容量 （字节）<br><code>OC</code> Old 代的容量 （字节）<br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数<br><code>FGC</code> 从应用程序启动到采样时 old 代（全gc）gc 次数<br><code>FGCT</code> 从应用程序启动到采样时 old 代（全gc）gc 所用时间（s）<br><code>GCT</code> 从应用程序启动到采样时 gc 用的总时间（s）</p>
</blockquote>
<p><strong>10、<code>jstat -gcpermcapacity&lt;pid&gt;</code>: perm对象的信息及其占用量。</strong></p>
<blockquote>
<p><code>PGCMN</code> perm代中初始化（最小）的大小 （字节）<br><code>PGCMX</code> perm代的最大容量 （字节）<br><code>PGC</code> perm代当前新生成的容量 （字节）<br><code>PC</code> Perm（持久代）的容量 （字节）<br><code>YGC</code> 从应用程序启动到采样时年轻代中 gc 次数<br><code>FGC</code> 从应用程序启动到采样时 old 代（全gc）gc 次数<br><code>FGCT</code> 从应用程序启动到采样时 old 代（全gc）gc 所用时间（s）<br><code>GCT</code> 从应用程序启动到采样时 gc 用的总时间（s）</p>
</blockquote>
<p><strong>11、<code>jstat -printcompilation &lt;pid&gt;</code>：当前VM执行的信息。</strong></p>
<blockquote>
<p><code>Compiled</code> 编译任务的数目<br><code>Size</code> 方法生成的字节码的大小<br><code>Type</code> 编译类型<br><code>Method</code> 类名和方法名用来标识编译的方法。<br>类名使用/做为一个命名空间分隔符。方法名是给定类中的方法。上述格式是由-XX:+PrintComplation选项进行设置的</p>
</blockquote>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/wu3227834" rel="external nofollow noreferrer">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/prism.js"></script>




    <script src="https://giscus.app/client.js"
        data-repo="wu3227834/wu3227834.github.io"
        data-repo-id="R_kgDOIh8vuA"
        data-category="General"
        data-category-id="DIC_kwDOIh8vuM4CpDjz"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>




</html>

<!-- fancybox support -->

    <!-- for config: default is false -->
    <!-- for page: default is true -->
    
<script src="/js/fancybox/jquery.fancybox.min.js" key="fancybox_js"></script>
<script src="/js/fancybox/wrapImage.js" key="wrap_image_js"></script>

        
<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css" key="fancybox_css">

            

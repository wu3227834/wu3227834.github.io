---
layout: mypost
title:  openwrt开启smb网络共享，挂载kodi的smb服务器
categories: [openwrt,smb,kodi,挂载点,samba]
---

#### 一，openwrt开启smb网络共享的流程

##### 1. openwrt→系统→挂载点：自动挂载分区和磁盘。

可以如果你上一步已经选择好了自动挂载，你记录一下你要挂载磁盘的容量和剩余容量，可以根据容量判断你需要给smb配置的挂载点。这里只是示例，如果你挂载的异动硬盘或者U盘，一般挂载点的名称会自动给你配置，名称的格式一般为：/mnt/sda1（sda后面的数字自己判断）。如果系统没有显示你添加的U盘或者移动硬盘，你需要添加一下。

![image](https://www.wuyeso.com/zb_users/upload/2022/11/202211191668872447208862.png)

![image](https://www.wuyeso.com/zb_users/upload/2022/11/202211191668872466912197.png)

##### 2. openwrt→服务→网络共享，添加给smb添加挂载的磁盘。
这里的“共享目录名称”，要记得，并且最好简单一点。比如命名为“1”。

![image](https://www.wuyeso.com/zb_users/upload/2022/11/202211191668872489289294.png)

##### 3. 同网络下的电脑打开smb服务
###### 3.1 安全协议
win10默认的是smbV2的安全协议，smbV1存在安全漏洞。
###### 3.2 打开smb共享的磁盘
打开的时候需要注意，例如打开电脑的C盘，然后在地址栏输入你的openwrt的服务器地址，我设置的是192.168.2.1（特别注意，斜杆的方向“\\192.168.2.1”不要弄错了）。然后就能看到你smb网络共享服务挂载的磁盘了。显示的名称就是你设置的名称，如果你上一步设置的共享目录名称是“1”，这个时候你看到的就是一个名字为“1”的共享文件夹（此处示例图片中给共享文件夹命名为openwrt）。

![image](https://www.wuyeso.com/zb_users/upload/2022/11/202211191668870529485373.png)

##### 4. 添加网络映射。
看到磁盘之后，为了方便下次访问，我们添加一下网络映射，下次进入smb共享文件的文件夹，就不需要输入地址了。添加方式在共享文件夹上点击右键，映射网络驱动器。

![image](https://www.wuyeso.com/zb_users/upload/2022/11/202211191668870560140344.png)

##### 5. 设置驱动器符号，确认就可以了。这个时候你的电脑里面会多了一个网络映射好的盘符。

![image](https://www.wuyeso.com/zb_users/upload/2022/11/202211191668870579410953.png)

#### 二，网络机顶盒，使用KODI访问smb服务器

##### 1. 进入KODI，选择视频→文件→添加视频

##### 2.选择浏览，添加网络位置

##### 3. 选择windows网络（smb）

输入服务器名称，在上一步，映射网络驱动器的时候，有个文件夹地址。输入这个地址就可以，但是要注意，斜杠的方向！斜杠的方向很重要。你只需要输入："192.168.2.1/1"，kodi系统会帮你补全为：smb://192.168.2.1/1

然后，kodi就可以访问你的smb网络共享服务器了。



---

###### 参考文章：

 [教你如何解决蓝光机/KODI无法打开局域网smb共享的问题](https://baijiahao.baidu.com/s?id=1696264591178483583&wfr=spider&for=pc)

[关于openwrt文件共享/smb - 小霸王oo - 博客园 ](https://www.cnblogs.com/xiaobawangoo/p/15499285.html)
